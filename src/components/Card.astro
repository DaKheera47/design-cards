---
// https://davidwalsh.name/css-flip
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

interface Props {
  imageFront: string;
  title?: string | undefined;
  body?: string | undefined;
  imageBack?: string | undefined;
  flippable?: boolean | undefined;
}

const { title, body, imageFront, imageBack } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/**/*.{jpeg,jpg,png,gif,webp}",
);

if (!images[imageFront]) {
  throw new Error(
    `"${imageFront}" does not exist in glob: "/src/assets/**/*.{jpeg,jpg,png,gif,webp}"`,
  );
}
---

<a
  class="text-white hover:underline"
  href=`/cards/${title}`
>
  <h2>
    {title}
  </h2>

  <p>
    {body}
  </p>

  <!-- <Image
    src={images[imageFront]()}
    alt={title || ""}
    class="max-w-96"
  /> -->
</a>

<style>
  /* entire container, keeps perspective */
  .flip-container {
    perspective: 1000px;
  }
  /* flip the pane when hovered */
  .flip-container:hover .flipper,
  .flip-container.hover .flipper {
    transform: rotateY(180deg);
  }

  .flip-container:hover .flipper,
  .flip-container.hover .flipper,
  .flip-container.flip .flipper {
    transform: rotateY(180deg);
  }

  .flip-container,
  .front,
  .back {
    width: 320px;
    height: 480px;
  }

  /* flip speed goes here */
  .flipper {
    transition: 0.6s;
    transform-style: preserve-3d;

    position: relative;
  }

  /* hide back of pane during swap */
  .front,
  .back {
    backface-visibility: hidden;

    position: absolute;
    top: 0;
    left: 0;
  }

  /* front pane, placed above back */
  .front {
    z-index: 2;
    /* for firefox 31 */
    transform: rotateY(0deg);
  }

  /* back, initially hidden pane */
  .back {
    transform: rotateY(180deg);
  }
</style>
